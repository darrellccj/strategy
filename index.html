<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Growth Investing Simulator</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>Growth Investing Simulator</h1>
    <p class="disclaimer">Past performance does not guarantee future results.</p>

    <div class="mode-tabs">
      <button class="mode-tab active" data-mode="simulate">Simulate</button>
      <button class="mode-tab" data-mode="optimize">Optimize</button>
    </div>

    <div class="main-layout" id="simulate-layout">
    <div class="card">
      <div class="input-group">
        <label>Portfolio</label>
        <div class="add-ticker-row">
          <div class="ticker-search-wrapper">
            <input type="text" class="ticker-search" id="ticker-search" placeholder="Add a stock (e.g. AAPL)" autocomplete="off">
            <div class="ticker-dropdown" id="ticker-dropdown"></div>
          </div>
          <button class="add-ticker-btn" id="add-ticker-btn" disabled>+</button>
        </div>
        <div id="portfolio-list" class="portfolio-list"></div>
        <div class="allocation-bar"><div class="allocation-fill ok" id="allocation-fill"></div></div>
        <div class="allocation-status" id="allocation-status">Total: 100%</div>
      </div>

      <div class="input-group">
        <label>Strategy</label>
        <div class="strategy-select-wrapper">
          <button class="strategy-select-btn" id="strategy-select-btn">
            <span id="strategy-btn-text">Monthly DCA</span>
            <span class="arrow">&#9660;</span>
          </button>
          <div class="strategy-select-dropdown" id="strategy-dropdown"></div>
        </div>
      </div>

      <div class="input-group">
        <label id="amount-label">Monthly Amount</label>
        <div class="amount-input-wrapper">
          <span class="currency-symbol">$</span>
          <input type="text" class="amount-input" id="amount" value="500" inputmode="numeric">
        </div>
        <div class="amount-hint" id="amount-hint">Amount you'll invest each month</div>
      </div>

      <div class="input-group">
        <label>If you started investing...</label>
        <div class="slider-container">
          <input type="range" class="time-slider" id="years" min="1" max="10" value="5">
          <div class="slider-value"><span id="years-display">5</span> years ago</div>
          <div class="slider-labels">
            <span>1 year ago</span>
            <span>10 years ago</span>
          </div>
        </div>
      </div>
    </div>

    <div class="card results-card">
      <div class="results-grid">
        <div class="result-item">
          <div class="result-label">Total Contributed</div>
          <div class="result-value" id="total-contributed">$0</div>
        </div>

        <div class="result-item">
          <div class="result-label">Value Today</div>
          <div class="result-value" id="final-value">$0</div>
          <div class="result-subtext" id="profit-text">Profit: $0</div>
        </div>

        <div class="result-item">
          <div class="result-label">Max Drawdown</div>
          <div class="result-value negative" id="max-drawdown">-0%</div>
        </div>

        <div class="result-item">
          <div class="result-label">Annualized Return</div>
          <div class="result-value" id="total-return">0%</div>
        </div>
      </div>

      <div class="chart-container">
        <div class="chart-title">Historical Portfolio Value</div>
        <canvas id="chart"></canvas>
        <div class="chart-legend">
          <div class="legend-item">
            <div class="legend-dot typical"></div>
            <span>Portfolio Value</span>
          </div>
          <div class="legend-item">
            <div class="legend-dot" style="background: #d4cfc4;"></div>
            <span>Total Invested</span>
          </div>
        </div>
        <div class="data-source">Data from Yahoo Finance. Past performance doesn't guarantee future results.</div>
      </div>

      <button class="breakdown-toggle" id="breakdown-toggle" style="display:none;">
        Per-Ticker Breakdown <span class="arrow">&#9660;</span>
      </button>
      <div class="breakdown-list" id="breakdown-list"></div>
    </div>
    </div>

    <!-- Optimize Mode -->
    <div class="main-layout" id="optimize-layout" style="display:none;">
    <div class="card optimize-card visible">
      <div class="input-group">
        <label>Target Annual Return</label>
        <div class="target-input-wrapper">
          <input type="text" class="target-input" id="optimize-target" value="15" inputmode="numeric">
          <span class="target-suffix">%/yr</span>
        </div>
      </div>

      <div class="input-group">
        <label>Backtest Period</label>
        <div class="slider-container">
          <input type="range" class="time-slider" id="optimize-years" min="1" max="10" value="5">
          <div class="slider-value"><span id="optimize-years-display">5</span> years ago</div>
          <div class="slider-labels">
            <span>1 year ago</span>
            <span>10 years ago</span>
          </div>
        </div>
      </div>

      <div class="input-group">
        <label>Portfolio Complexity</label>
        <div class="complexity-btns">
          <button class="complexity-btn active" data-complexity="1">Single Asset</button>
          <button class="complexity-btn" data-complexity="2">2 Assets</button>
          <button class="complexity-btn" data-complexity="3">3 Assets</button>
        </div>
      </div>

      <button class="run-optimize-btn" id="run-optimize-btn">Find Best Portfolios</button>

      <div class="optimize-status" id="optimize-status">
        <span id="optimize-status-text">Testing portfolio 0 of 0 (0%)</span>
        <div class="optimize-progress-bar">
          <div class="optimize-progress-fill" id="optimize-progress-fill"></div>
        </div>
      </div>
    </div>

    <div class="card results-card optimize-results-card visible" id="optimize-results-card">
      <div id="optimize-results-container">
        <div class="optimize-empty">Click "Find Best Portfolios" to start</div>
      </div>
    </div>
    </div>
  </div>

  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/data.js"></script>
  <script src="js/indicators.js"></script>
  <script src="js/backtest.js"></script>
  <script src="js/chart.js"></script>
  <script src="js/optimize.js"></script>
  <script src="js/ui.js"></script>
</body>
</html>
